<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
    <title>Habit Tracker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link th:href="@{/styles/layout.css}" rel="stylesheet" />
</head>
<body>
    <div class="page-container">
        <!-- Sidebar -->
        <aside class="sidebar d-flex flex-column align-items-center py-4" sec:authorize="isAuthenticated()">
            <div class="w-100 px-3 mb-4 d-flex justify-content-between align-items-center">
                <span class="fw-semibold" sec:authentication="name"></span>
                <form th:action="@{/logout}" method="post">
                    <button class="btn" type="submit">Logout</button>
                </form>
            </div>
            <nav class="nav flex-column text-center w-100 gap-3">
                <!-- Clicking this link triggers an HTTP GET request to /goals.
                 Springâ€™s DispatcherServlet will route that request to
                 NavigationController#showGoals(), which then returns the appropriate view -->
                <a class="nav-link" th:href="@{/habits}">Habits</a>
                <a class="nav-link" th:href="@{/goals}">Goals</a>
                <a class="nav-link" th:href="@{/categories}">Categories</a>
                <hr class="my-2" />
                <a class="nav-link" th:href="@{/today}">Today</a>
                <a class="nav-link" th:href="@{/week}">Week</a>
                <a class="nav-link" th:href="@{/month}">Month</a>
                <hr class="my-2" />
                <a class="nav-link" th:href="@{/backup}">Backup</a>
                <a class="nav-link" th:href="@{/uploads}">Image Uploads</a>
            </nav>
        </aside>

        <!-- main area -->
        <div class="content-wrapper">
            <main>
                <!-- dynamically load new pages in the main content area - see Navigation Controller for handling
                    with elvis (?:) daily page  is set per default
                    content is the string that has to be as fragment in the html to be shown in main area
                -->
                <div th:replace="~{${newPage} ?: 'daily' :: content}"></div>
            </main>
            <!-- hardcoded footer page -->
            <footer th:replace="~{fragments/footer :: footer}"></footer>
        </div>
    </div>

<script src="/js/habit.js"></script>

</body>
</html>
